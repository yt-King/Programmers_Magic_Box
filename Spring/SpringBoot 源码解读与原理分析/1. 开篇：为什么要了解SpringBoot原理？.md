# 1. 开篇：为什么要了解SpringBoot原理？

## 大家对了解框架原理的看法

在写这本小册之前，我调查了一些工作年限各不相同的开发者，问他们对于了解框架源码和原理的看法，获得的答案也五花八门：

- 出现相关问题时能更快地找到问题点
- 不只是为了用，还得懂怎么修
- 能慢慢学到别人写代码的风格、注释、命名等
- 有一种学外语的感觉，看多了以后遇到类似的，就不用花费太多时间去了解
- 面试好吹牛
- ......

在我看来，这些都是很直接而且很明了的观点，我也都赞同。

说说我的看法和故事吧。

## 我的框架阅读的开始

最开始在学习 `SpringFramework` 的时候，无论是书还是课，还是老师，都跟我说 `Spring` 要学的东西多，而且基本上是学多少用多少。但后续到了真正上岗工作开发时，发现工作内容中使用到的 `Spring` 的东西好像还挺有限的，这给了我一种感觉，类似于把书读薄了，感觉 `Spring` 就这么回事。后来有一次在使用 `SpringDataJPA` 的时候，有一个多对多的中间表的表名死活匹配不上，注解配置也看不出来什么问题，去网上搜也搜不到能解决我这个问题的方案，百般无奈之下我选择一点一点用 Debug 跟进源码去找表名的由来。虽说最终找到了问题并成功解决，但这个过程给了我一种很强烈的感觉： `Spring` 这个框架真的不简单，他里面设计的完整、严密，以及他的机制和设计等等，不愧是十几年众多大佬的沉淀，我觉得深入了解一下 `Spring` 会对我的开发有更好的帮助。

从这以后，我开始试探性的看一些 `Spring` 和 `SpringBoot` 的源码，但初yuedu源码，而且是自己单枪匹马深入源码，难度是可想而知的；而且其中我感觉到了一些不大对劲的地方：我怎么感觉有些东西我好像在哪儿见过，但又不知道他是干嘛的呢？去搜一下，这个之前学基础的时候还有提过？

好吧，看来确实是”把书读薄了“，那读源码，在我看来，不仅仅是把之前把书读薄的反向过程，更是在原来的基础上**用自己的理解，重新认识它，并看懂它、看透它**。我想这才是读源码的一个很重要的目的吧。我的思维很简单，人家的东西永远是人家的，进到自己脑子里，用自己的思维重构它并记住，那才是自己的。

说到底，了解框架原理，阅读框架源码，有助于我们更好地理解他，并且能在恰当的时机，用恰当的方法处理问题，其实就是所谓的**会用、会修、会改造、会扩展**。

## 为什么要了解SpringBoot的原理

好了，回到咱小册的主题，这本小册带你阅读的是 `SpringBoot` 的源码，那 `SpringFramework` 咱都了解他的地位，也不必过多的吹捧。`SpringBoot` 的本质是构建在 `SpringFramework` 基础上的、简化基于 `SpringFramework` 的应用搭建和开发的脚手架。在 SpringBoot 的官网上对他的描述：

> Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can "just run".
>
> We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need very little Spring configuration.
>
> 使用 Spring Boot 可以轻松地创建独立的、基于生产级别的基于 Spring 的应用程序，并且这个应用程序可以“直接运行”。
>
> 我们对 Spring 平台和第三方库设计了一些约定的视图，因此您可以以最小的配置就可以开始使用。大多数 SpringBoot 应用程序只需要很少的 Spring 配置。

可以看出它可以更简单快速的构建基于 `SpringFramework` 的应用，而且整合第三方库也更容易。

这本小册编写的时间是2019年10月，`SpringBoot` 已经被大量企业和开发者认可并大量使用，使用 `SpringBoot` 构建应用已然成为一项必不可少的技能。

相比于 `SpringFramework`，`SpringBoot` 的特点和优势更加明显：

- 基于原生 `SpringFramework` ，扩展而不破坏原有
- 可以直接创建一个单体应用jar包，并可以直接运行
- 可以使用嵌入式Web容器，也可以部署在外部Web容器中
- 提供starter依赖，可以快速集成组件和第三方库
- 支持自动配置Spring和第三方库
- 提供生产级别的特性（监控、健康检查、外部化配置等）

其实说白了，这么说都是在说 `SpringBoot` 有多好，所以我们要学习要用，都是说辞而已。真正能引导我们去了解去学习的，大多都是你所处的项目团队或者公司正在使用的技术正在用，所以你要去学，要会用，甚至要懂他一些更深的东西。如果你的项目中业务场景需要一些特殊定制，甚至对源码进行定制化，那这时候了解原理就变成必需的了，只有充分了解源码，知道框架底层的工作原理，才能对源码中原有的机制进行修改 / 扩展等等。